# IESfromCaustics
## 3dsmax script – Генератор IES на основании каустики светильника

Базовая идея описана мною на сайте [3ddd](https://3ddd.ru/blog/post/ies_dlia_nakladnykh_tochiechnykh_svietil_nikov_na_osnovie_sfierichieskoi_proiektsii_kaustiki).  
В последствии был написан данный [скрипт](https://3ddd.ru/blog/post/skript_dlia_sozdaniia_ies_dlia_vstroiennykh_svietil_nikov_na_osnovie_sfierichieskoi_proiektsii_kaustiki).

## Требования
Для работы скрита необходим установленный 3dsmax + VRay

## Установка
* Скачате файл *.mzp из [install](./install/)
* Перетащите его в окно 3dsmax
* Зайдите в меню: ```Customize -> Cuctomize User Interface... -> Toolbars -> Category -> #PankovScripts```
* Перетащите ```IES from Caustics generator``` на любую панель
* При нажатии на кнопу запускается основное окно приложения


# История версий

## 1.2 beta – 25.12.2016

* По умолчанию включена сохранение теней от стекла (физически корректно)
* Оптимизирован процесс просчёта каустики
* Доработана сцена рендеринга каустики
    * Поверхность проекции имитирует габариты помещения (1500х1500х2500) Таким образом достигается более корректное распределение бликов каустики
    * Решена задача падения интенсивности света при разноудалённых точек поверхности от источника света
* Доработана сцена теста IES
* Размеры комнаты (1500х1500х2500)
* Светильник смещён в сторону (для оценки падения бликов на разных расстояниях от стены)
* Еще добавить:
    * Авто подгрузку говорого IES
    * Авто импорт светильника
    * Автокорректировка материалов
    * Изменеие размеров источника света

<img src="./docs/v1.2b/v1.2b main window.png" alt="main window" width="300"/>

## 1.1 beta – 22.12.2016

В этой версии линейно выстроен рабочий процесс по шагам и сведены к минимуму ручные операции.
Основные параметры по настройке конечного результата вынесены в пользовательский интерфейс.

* Исправлена ошибка файла IES при изменении разрешения
* Добавлено сохранение параметров по умолчанию в INI при выходе
* Расширен основной функционал программы:
    * Кнопка удаления тестового образца светильника с загруженного шаблона
    * Настройка: Диаметр сферы, IOR стекла, Степень зеркальности отражателя, яркость источника света, множитель интенсивности каустики
    * Предварительный просмотр с низкими значениями просчёта каустики «Preview»
    * При запуске визуализации через программу, происходит просчёт каустики, сохранение * во временный файл, скрывается лишняя геометрия, просчитывается результат
    * Оставлять только каустику (исключать прямой свет)
    * Оставлять тени от стекла
* Кнопка загрузки сцены для тестирования IES перенесена в конец, как финальный шаг работы с программой
* Добавлена справка

<img src="./docs/v1.1b/v1.1b main window.png" alt="main window" width="300"/>

## 1.0 beta – 21.03.2016
Начальный функционал:
* Загрузка сцен для генерации каустики Vray и тестирования IES файла Vray
* Поля основных записей в IES файл: Manufacturer, Model, Lamp Type, Power consumption, Luminous power, Size
* Задание детализации IES фала
* Сохранение положения окна

<img src="./docs/v1.0b/v1.0b main window.png" alt="main window" width="300"/>