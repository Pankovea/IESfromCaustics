<html>

<head>
    <meta http-equiv=Content-Type content="text/html; charset=UTF-8">
</head>

<link rel="stylesheet" href="help.files/styles.css">

<body lang=RU link=blue vlink=purple>

    <h1>Генератор IES</b> на основании каустики светильника</h1>
    
    <h1>Быстрый старт</h1>

    <p>Поcле запуска окно интерфейса выглядит следующим образом:</p>

    <table>
        <tr>
            <td>
                <img src="help.files/QuickStart.png">
            </td>
            <td valign="top">
                <ol>
                    <li>Загрузить сцену</li>
                    <li>Удалить тестовый светильникё</li>
                    <li>Добавить свой светильник <b>File -&gt; Import -&gt; Merge</b> и разместить на месте тестового</li>
                    <li>Выделить в светильнике все стеклянные объекты и нажать на кнопу <b>Glass mat to selected</b></li>
                    <li>Выделить в светильнике все хромовые объекты и нажать на кнопу <b>Chrome mat to selected</b></li>
                    <p><b>Остальные элементы светильника, не учавствующие в рассчёте каустики, удалить</b></p>
                    <li>Выполнить предварительный рендер. Если не нравится результат, то крутить настройки выше</li>
                    <p>Следующие настройки интуитивно понятны</p>
                    <li>Можно сохранять IES</li>
                    <p>Файл сцены пока оставить для последующего редактирования. Открыть новый 3dsmax и</p>
                    <li>Загрузить сцену для теста полученного IES</li>
                </ol>
            </td>
        </tr>
    </table>

    <h1>Общая справка</h1>

    <table>
        <td style='border-right:double #E36C0A 1.5pt'>
            <p><span>G</span></p>
        </td>
        <td>
            <p>Этим знаком я помечаю важные места. От понимания этих
                моменотов зависит работоспособность программы.
            </p>
        </td>
    </table>

    <h1>Настройки</h1>

    <p>
        <img src="help.files/00_Settings.png">
    </p>

    <p>
        <b>Save last settings on exit</b> – Сохраняет все значения интерфейса в “defaults.ini”
        <br>
        <b>Reset to defaults</b> – Сброс в начальное состояние
        <br>
        <b>Кнопка с путём</b> – Открыть временную папку в проводнике
        <br>
        <b>Set temp path</b> – Выбрать временную папку.
        Она используется для хранения настроек и временного хранения данных для рассчёта.
        Если папка будет храниться в сетевом размещении, то скрипт будет сильно тормозить при сохранении IES файла
    </p>

    <h1>Рабочий процесс. ШАГ 1 – Загрузка шаблонной сцены</h1>

    <p>
        <img src="help.files/01_Step1_01.png">
    </p>

    <p>
        Первой кнопкой загружаем шаблонную сцену. Смотрим как всё устроено:
    </p>
    <p>
        <img src="help.files/01_Step1_04.png">
    </p>
    <p>
        Сцена имеет сглаженный прямоугольник, имитирующий стены, для получения каустики, камеру, источник света и тестовый
        светильник.

    <table>
        <td style='border-right:double #E36C0A 1.5pt;'>
            <p><span>G</span></p>
        </td>
        <td>
            <p>Камера расположена приблизительно по середине хрусталей, таким образом,
                что бы видно было потолок. На место камеры в будущем расположим источник света с IES.
            </p><p>
                Поворот камеры так же важен. Именно с правого края начинается описание IES
                (с противоположного взгляду камеры). Таким образом мы сохраним правильную
                ориентацию бликов.
            </p><p>
                Источник каустики расположен на месте реального источника света в глубине светильника
                (над потолком). Он состоит из группы двух VrayLight разным количеством сэмплов
                для просчёта каустики: 1500 и 7000. Программа использует их для предварительного
                и финального просчёта соответственно.
            </p>
        </td>
    </table>

</p><p>
    Т.к. свет угасает обратно квадрату расстояния, материал сферы компенсирует такое поведение света с помощью карты дистанции.
</p>

<p>Модификатор «Make hole» - это «Edit Poly» модификатор, вырезающий отверстие для светильника.
    По умолчанию он выключен, но при необходимости его включаем, чтобы использовать встроенные светильники.</p>
<p>
    <img src="help.files/01_Step1_06.png">
</p>
    

    <p>Итак … Добавляем нужный нам светильник в сцену <b>File -&gt; Import -&gt; Merge</b></p>

    <p>Располагаем его в центре сферы.</p>

    <p>Если это встройка, то подобным образом как в примере.</p>

    <p>Если бра, то размещаем на рассчётном уровне на боковой поверхности</p>

    <p>Далее убираем детали, не участвующие в просчёте каустики. Оставляем только хрустали и отражатель.</p>
    
    <h1>>ШАГ 2 – Настройка сцены</h1>

    <p>
        <img src="help.files/02_Step2.png">
    </p>

    <p>В целом эти настройки можно оставить по умолчанию</p>

    <p>Выделяем все хрустали и кнопкой <b>Glass mat to selected</b> назначаем материал стекла.<br>
        Выделяем отражатель и кнопкой <b>Chrome mat to selected</b> назначаем материал отражателя.</p>

    <table>
        <td style='border-right:double #E36C0A 1.5pt;'>
            <p><span>G</span></p>
        </td>
        <td style='border:none; padding:0cm 5.4pt 0cm 5.4pt'>
            <p>Все материалы сцены расположены в редакторе материалов в самом конце. Их перемещать нельзя. Программа активно оперирует значениями этих материалов и обращается к ним по номеру слота.
            </p><p>
                <img src="help.files/medit_slots.png">
            </p>
        </td>
    </table>

    <p>Далее можно нажать кнопку <b>PREVIEW REDNER</b>, оценить результат и настроить значения по вкусу:</p>

    <p>
        <img src="help.files/Preview render.png">
    </p>

    <p><b>Light Radius</b>. Этот параметр влияет на чёткость каустики.<br>
        <b>Glass IOR</b> – изменяет преломление каустики в хрусталях и влияет на рисунок<br>
        <b>Light multiplier</b> – общее количество света<br>
        <b>Reflector (%)</b> – количество отрженного света от отражателя в процентах<br>
        <b>Caustics mult</b> – множитель каустики.
    </p>

    <p>Принцип таков: Сначала убираем <b>Reflector</b> в ноль, потом настраиваем <b>Light multiplier Glass IOR</b>.
        Параметром <b>Caustics mult</b> меняем соотношение прямого света и преломлённого. В конце добавляем в нужной
        пропорции <b>Reflector</b>
    </p>

    <p>Следующие параметры рекомендую не изменять, но поэкспериментировать можно: </p>

    <p><b>Leave glass shadows</b> – оставляет отбрасывание теней хрусталями<br>
        <b>Render only caustic</b> – убирает прямое освещение<br>
    </p>

    <h1>ШАГ 3 – Дополнительные данные светильника</h1>

    <p>
        <img src="help.files/03_Step3.png">
    </p>

    <p>Здесь берём спецификацию светильника и вписываем
        производителя, модель, тип лампы, мощность лампы, световой поток и размер
        источника света. Это матаданные, не влияющие на визуализацию светильника.</p>

    <p>2 параметра влияющих на корректную визуализацию светильника
        в будущем:</p>

    <ul>
        <li>
            световой поток - влияет на количество света
            даваемого источником света. Указан в спецификации к лампочке. Можно взять из
            таблицы на <a href="https://ru.wikipedia.org/wiki/%D0%9B%D1%8E%D0%BC%D0%B5%D0%BD">википедии</a>
            столбец «Световой поток (лм)».
        </li>
        <li>
            размер источника света (диаметр) – влияет на
            размытость теней. Размер стоит взять приблизительно равным размеру отражателя
            или, при его отсутствии, размеру лампочки.
        </li>
    </ul>

    <h1>ШАГ 4 - Разрешение</h1>

    <p>
        <img src="help.files/04_Step4.png">
    </p>

    <table>
        <tr>
            <td style='border-right:double #E36C0A 1.5pt;'>
                <p><span style='font-size:26pt;font-family:Wingdings;color:#F79646;'>G</span></p>
            </td>
            <td style='border:none; padding:0cm 5.4pt 0cm 5.4pt'>
                <p>В большинстве случаев значения по умолчанию достаточно. Увеличение
                    этого параметра может сильно затормозить работу со светильниками, использующими
                    полученный файл IES. Если необходимо разместить в сцене большое количество 
                    разных IES, то возможно стоит понизить этот параметр.
                </p>
            </td>
        </tr>
    </table>

    <p>Значения полей привязаны в соотношении 2:1, как на сферической
        развёртке.</p>

    <p>По умолчанию задан шаг детализации в 1 градус по широте и 1 по долготе.</p>
    
    <h1>ШАГ 5 - Сохранение</h1>

    <p>
        <img src="help.files/05_Step5.png">
    </p>

    <p>Перед началом программа спросит имя файла и путь сохранения.</p>

    <h1>ШАГ 6 - Тестирование</h1>

    <p>
        <img src="help.files/06_Step6.png">
    </p>


    <p>Эта кнопка загрузит сцену для тестирования полученного IES. <b>Текущая сцена не сохраняется.</b>
        Поэтому, перед нажатием кнопки рекомендую сохранить текущую сцену в новый файл
        (не перезаписывайте исходную сцену!)</p>
    <p>Программа спросит какой файл тестировать. Автоматически будет выбран последний созданный программой файл.
        нажимаете открыть. И сцена автоматичеси будет отрендерена. 
    </p>
 
    <p><img src="help.files/test_render.jpg">
    </p>

    <p style='font-size:16pt'><b>Готово!</b></p>

    <address> <a href="https://3ddd.ru/users/pankovea">pankovea @ 3ddd.ru</address>

</body>

</html>